(()=>{"use strict";var e=document.querySelector("#tasks-container"),t=[],o=JSON.parse(localStorage.getItem("tasks"));function n(t,n,r,c){var a=document.createElement("div");switch(a.classList.add("task","mt-1","rounded","p-2","ps-3"),a.id="task".concat(n),c){case"low":a.style.backgroundColor="#0af";break;case"medium":a.style.backgroundColor="yellow";break;case"high":a.style.backgroundColor="red"}var l=document.createElement("div");l.classList.add("row"),a.appendChild(l);var s=document.createElement("div");s.classList.add("col-sm");var i=document.createElement("input");i.type="checkbox",s.appendChild(i);var d=document.createElement("p");d.textContent=t.title,d.classList.add("d-inline","ps-2"),s.appendChild(d),l.appendChild(s);var u=document.createElement("div");u.classList.add("col-sm"),u.textContent="Due date: ".concat(t.dueDate),l.appendChild(u);var f=document.createElement("img");return f.classList.add("delete-button"),f.src="../src/icons/delete-icon.svg",f.title="Delete Task",f.addEventListener("click",(function(){var e;(e=a).remove(),console.log(e),console.log(e.dataset.childofproject),o.forEach((function(t){e.dataset.childofproject===t.project&&(o.splice(o.indexOf(t),1),localStorage.setItem("tasks",JSON.stringify(o)),console.log("Your tasks now are:"),console.log(o))})),console.log("Successfully removed ".concat(e.id,"."))})),u.appendChild(f),a.setAttribute("data-childofproject",r),e.appendChild(a),a}var r=document.querySelector("#projects-display"),c=document.querySelector("#projects-container"),a=document.querySelector("#tasks-container");function l(e){var t=document.createElement("div");t.classList.add("project","col-sm","bg-info","rounded","my-1","p-2"),t.id=e,console.log(t.id),t.textContent=e,c.appendChild(t)}function s(e){a.classList.contains("d-none")?(a.classList.remove("d-none"),r.classList.add("d-none")):console.log("Tasks container is visible"),document.querySelectorAll(".task").forEach((function(t){t.dataset.childofproject===e?(t.classList.remove("d-none"),console.log("Showing project's tasks")):(t.classList.add("d-none"),console.log("hide"))}))}function i(e,t){if(e){if("string"==typeof e)return d(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}document.addEventListener("DOMContentLoaded",(function(){var e,o,c=1,u=[];console.log(t);var f,m=[];if(localStorage.getItem("projectTitles")){m.push.apply(m,function(e){if(Array.isArray(e))return d(e)}(f=JSON.parse(localStorage.getItem("projectTitles")))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||i(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m.forEach((function(e){e||m.splice(m.indexOf(e),1)})),console.log("Starting myProjects array:"),console.log(m);var p,g=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=i(e))){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){l=!0,c=e},f:function(){try{a||null==o.return||o.return()}finally{if(l)throw c}}}}(m);try{for(g.s();!(p=g.n()).done;)l(p.value)}catch(e){g.e(e)}finally{g.f()}}function y(){document.querySelectorAll(".project").forEach((function(t){t.addEventListener("click",(function(n){var r=n.target.id;o.forEach((function(e){if(e.project===r){console.log("Yes, same");var t=s(r);console.log(t)}if(e.project===r){console.log("Yes, same");var o=s(r);console.log(o)}})),s((e=t).id)}))}))}function v(){var e;(e=document.querySelector("#task-creation-container")).classList.contains("d-none")||(e.classList.add("d-none"),console.log("Hid form")),r.classList.contains("d-none")&&(r.classList.remove("d-none"),a.classList.add("d-none")),document.querySelectorAll(".task").forEach((function(e){e.classList.add("d-none"),console.log("Hiding all tasks")}))}y(),localStorage.tasks&&(o=JSON.parse(localStorage.getItem("tasks")),console.log("New task list:"),console.log(t),o.forEach((function(e){console.log(e);var t=n(e,c,e.project,e.priority);u.push(t)}))),console.log("Starting taskList:"),console.log(t),document.querySelector("#create-project-button").addEventListener("click",(function(){var e=prompt("Type in your project name");e?(l(e),localStorage.setItem("projectTitles",JSON.stringify(m))):alert("You must input a name to your project to create it."),m.push(e),localStorage.setItem("projectTitles",JSON.stringify(m)),y()}));var S=document.querySelector("#add-task-button"),h=document.querySelector("#task-creation-button"),k=document.querySelector("#task-title"),b=document.querySelector("#task-due-date"),L=document.querySelector("#projects-button"),j=document.querySelector("#delete-project-button");S.addEventListener("click",(function(){var e;(e=document.querySelector("#task-creation-container")).classList.contains("d-none")?(e.classList.remove("d-none"),console.log("Showed form")):console.log("Task creation container already visible.")})),h.addEventListener("click",(function(){var t=function(e,t,o,r){console.log(e);var c={};return c.title=e,c.dueDate=t,c.priority=document.querySelector("#priority").value,c.project=r,n(c,o,r,c.priority),c}(k.value,b.value,c,e.id);o.push(t),localStorage.setItem("tasks",JSON.stringify(o)),console.log("Built task:"),console.log(t),console.log("Task list:"),console.log(o),c++,k.value,b.value})),L.addEventListener("click",(function(){v()})),j.addEventListener("click",(function(){var t,o;o=m,(t=e).remove(),o.forEach((function(e){e===t.id&&(o.splice(o.indexOf(e),1),console.log("New array is:"),console.log(o),localStorage.clear(),localStorage.setItem("projectTitles",JSON.stringify(o)))})),y(),v()}))}))})();